<Window
    x:Class="Graphite.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Graphite"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    xmlns:graphite="using:Graphite.Helpers"
    mc:Ignorable="d"
    Title="Graphite - Login">

    <Window.SystemBackdrop>
        <MicaBackdrop Kind="BaseAlt"/>
    </Window.SystemBackdrop>
    
    <Grid >
        <Grid.Resources>
            <Style x:Key="TextButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{ThemeResource TextFillColorPrimaryBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="8,4"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Grid x:Name="RootGrid" Background="{TemplateBinding Background}">
                                <ContentPresenter x:Name="ContentPresenter"
                                                  Padding="{TemplateBinding Padding}"
                                                  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                  AutomationProperties.AccessibilityView="Raw"
                                                  Content="{TemplateBinding Content}"
                                                  ContentTemplate="{TemplateBinding ContentTemplate}"
                                                  ContentTransitions="{TemplateBinding ContentTransitions}"/>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal"/>
                                        <VisualState x:Name="PointerOver">
                                            <VisualState.Setters>
                                                <Setter Target="RootGrid.Background" Value="{ThemeResource SubtleFillColorSecondaryBrush}"/>
                                                <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource TextFillColorPrimaryBrush}"/>
                                            </VisualState.Setters>
                                        </VisualState>
                                        <VisualState x:Name="Pressed">
                                            <VisualState.Setters>
                                                <Setter Target="RootGrid.Background" Value="{ThemeResource SubtleFillColorTertiaryBrush}"/>
                                                <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource TextFillColorSecondaryBrush}"/>
                                            </VisualState.Setters>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <VisualState.Setters>
                                                <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource TextFillColorDisabledBrush}"/>
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="CardButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefault}"/>
                <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefault}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="CornerRadius" Value="8"/>
                <Setter Property="Padding" Value="0"/>
                <Setter Property="HorizontalAlignment" Value="Stretch"/>
                <Setter Property="VerticalAlignment" Value="Stretch"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Grid x:Name="RootGrid" Background="{TemplateBinding Background}"
                                  BorderBrush="{TemplateBinding BorderBrush}"
                                  BorderThickness="{TemplateBinding BorderThickness}"
                                  CornerRadius="{TemplateBinding CornerRadius}">
                                <ContentPresenter x:Name="ContentPresenter"
                                                  Padding="{TemplateBinding Padding}"
                                                  HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                  VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                  AutomationProperties.AccessibilityView="Raw"
                                                  Content="{TemplateBinding Content}"
                                                  ContentTemplate="{TemplateBinding ContentTemplate}"
                                                  ContentTransitions="{TemplateBinding ContentTransitions}"/>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal"/>
                                        <VisualState x:Name="PointerOver">
                                            <VisualState.Setters>
                                                <Setter Target="RootGrid.Background" Value="{ThemeResource CardBackgroundFillColorSecondary}"/>
                                                <Setter Target="RootGrid.BorderBrush" Value="{ThemeResource CardStrokeColorDefaultPressed}"/>
                                            </VisualState.Setters>
                                        </VisualState>
                                        <VisualState x:Name="Pressed">
                                            <VisualState.Setters>
                                                <Setter Target="RootGrid.Background" Value="{ThemeResource CardBackgroundFillColorTertiary}"/>
                                                <Setter Target="RootGrid.BorderBrush" Value="{ThemeResource CardStrokeColorDefaultPressed}"/>
                                            </VisualState.Setters>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <VisualState.Setters>
                                                <Setter Target="RootGrid.Background" Value="{ThemeResource CardBackgroundFillColorDisabled}"/>
                                                <Setter Target="RootGrid.BorderBrush" Value="{ThemeResource CardStrokeColorDefaultDisabled}"/>
                                                <Setter Target="ContentPresenter.Foreground" Value="{ThemeResource TextFillColorDisabled}"/>
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Who's using Graphite?" 
                   FontSize="32" 
                   FontWeight="SemiBold" 
                   HorizontalAlignment="Center"
                   Margin="0,48,0,0"/>

        <TextBlock Grid.Row="1"
                   Text="With Graphite profiles you can separate all your browsing data. Create profiles for friends and family, or split between work and personal use."
                   TextAlignment="Center"
                   TextWrapping="Wrap"
                   Margin="32,16,32,32"
                   Opacity="0.8"
                   MaxWidth="800"/>

        <GridView Grid.Row="2" 
                  x:Name="UserListView" 
                  SelectionMode="None"
                  IsItemClickEnabled="True"
                  ItemClick="UserListView_ItemClick"
                  HorizontalAlignment="Center"
                  Margin="32,0,32,32">
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <ItemsWrapGrid MaximumRowsOrColumns="4" Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
            <GridView.ItemTemplate>
                <DataTemplate>
                    <Grid Width="200" Height="240"
                          Background="{ThemeResource CardBackgroundFillColorDefault}"
                          BorderBrush="{ThemeResource CardStrokeColorDefault}"
                          BorderThickness="1"
                          CornerRadius="8"
                          Margin="8">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Button Style="{StaticResource TextButtonStyle}"
                                HorizontalAlignment="Right"
                                Margin="8,8,8,0">
                            <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE10C;"/>
                        </Button>

                        <PersonPicture Grid.Row="1"
                                       ProfilePicture="{Binding ProfileImageSource}"
                                       DisplayName="{Binding Username}"
                                       Height="100" Width="100"
                                       Margin="0,16"/>

                        <TextBlock Grid.Row="2"
                                   Text="{Binding Username}"
                                   FontWeight="SemiBold"
                                   HorizontalAlignment="Center"
                                   Margin="16,8,16,24"/>
                    </Grid>
                </DataTemplate>
            </GridView.ItemTemplate>
        </GridView>

        <Grid Grid.Row="3" 
              Padding="32,16" 
              Background="{ThemeResource LayerFillColorDefaultBrush}"
              BorderBrush="{ThemeResource CardStrokeColorDefault}"
              BorderThickness="0,1,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button
                x:Name="CreateNewUser"
    Padding="4"
                    Margin="-10,0,0,0"

    VerticalAlignment="Center"
    HorizontalAlignment="Left"
    Background="Transparent"
    BorderBrush="Transparent"
                Click="CreateNewUser_Click"
                >
                <StackPanel Orientation="Horizontal">
                    <FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xE710;"/>
                    <TextBlock Text="Add New Profile" Margin="4,0,0,0"/>
                </StackPanel>
            </Button>

            <Button
    x:Name="OpenGeustUser"
    Padding="4"
    VerticalAlignment="Center"
    HorizontalAlignment="Left"
    Margin="130,0,0,0"
    Background="Transparent"
    BorderBrush="Transparent"
    Click="OpenGuestUser_Click">
                <StackPanel Orientation="Horizontal">
                    <FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xEE57;"/>
                    <TextBlock Text="Open In Guest" Margin="4,0,0,0"/>
                </StackPanel>
            </Button>



            <CheckBox Grid.Column="3"
                      Content="Show on startup"
                      IsChecked="True"
                      Margin="16,0,0,0"/>
        </Grid>
    </Grid>
</Window>